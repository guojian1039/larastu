(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-set-invoice-invoice"],{1008:function(t,e,i){var n=i("1341");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("646264a4",n,!0,{sourceMap:!1,shadowMode:!1})},1341:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-12dc4fdb]{background-color:#f8f8f8}.invoice-list[data-v-12dc4fdb]{position:relative}.invoice-list .t-box[data-v-12dc4fdb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?30?%;color:#303133}.invoice-list .t-box .tag[data-v-12dc4fdb]{font-size:%?24?%;margin-right:%?10?%;border:1px solid;border-radius:%?4?%;padding:0 %?12?%}.invoice-list .u-box[data-v-12dc4fdb]{font-size:%?28?%;color:#909399;margin-top:%?16?%}.invoice-list .u-box .name[data-v-12dc4fdb]{margin-right:%?30?%}body.?%PAGE?%[data-v-12dc4fdb]{background-color:#f8f8f8}",""]),t.exports=e},"1c94":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".gj-load-more[data-v-23b2d473]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:%?80?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center\n\t/*position: fixed;*/\n\t/*bottom: 5upx;*/\n\t/*text-align: center;*/}.gj-load-more__text[data-v-23b2d473]{font-size:%?28?%;color:#999}.gj-load-more__img[data-v-23b2d473]{height:24px;width:24px;margin-right:10px}.gj-load-more__img > uni-view[data-v-23b2d473]{position:absolute}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]{width:6px;height:2px;border-top-left-radius:1px;border-bottom-left-radius:1px;background:#999;position:absolute;opacity:.2;-webkit-transform-origin:50%;transform-origin:50%;-webkit-animation:load-data-v-23b2d473 1.56s ease infinite;animation:load-data-v-23b2d473 1.56s ease infinite}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]:nth-child(1){-webkit-transform:rotate(90deg);transform:rotate(90deg);top:2px;left:9px}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]:nth-child(2){-webkit-transform:rotate(180deg);transform:rotate(180deg);top:11px;right:0}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]:nth-child(3){-webkit-transform:rotate(270deg);transform:rotate(270deg);bottom:2px;left:9px}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]:nth-child(4){top:11px;left:0}.load1[data-v-23b2d473],\n.load2[data-v-23b2d473],\n.load3[data-v-23b2d473]{height:24px;width:24px}.load2[data-v-23b2d473]{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.load3[data-v-23b2d473]{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.load1 uni-view[data-v-23b2d473]:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s}.load2 uni-view[data-v-23b2d473]:nth-child(1){-webkit-animation-delay:.13s;animation-delay:.13s}.load3 uni-view[data-v-23b2d473]:nth-child(1){-webkit-animation-delay:.26s;animation-delay:.26s}.load1 uni-view[data-v-23b2d473]:nth-child(2){-webkit-animation-delay:.39s;animation-delay:.39s}.load2 uni-view[data-v-23b2d473]:nth-child(2){-webkit-animation-delay:.52s;animation-delay:.52s}.load3 uni-view[data-v-23b2d473]:nth-child(2){-webkit-animation-delay:.65s;animation-delay:.65s}.load1 uni-view[data-v-23b2d473]:nth-child(3){-webkit-animation-delay:.78s;animation-delay:.78s}.load2 uni-view[data-v-23b2d473]:nth-child(3){-webkit-animation-delay:.91s;animation-delay:.91s}.load3 uni-view[data-v-23b2d473]:nth-child(3){-webkit-animation-delay:1.04s;animation-delay:1.04s}.load1 uni-view[data-v-23b2d473]:nth-child(4){-webkit-animation-delay:1.17s;animation-delay:1.17s}.load2 uni-view[data-v-23b2d473]:nth-child(4){-webkit-animation-delay:1.3s;animation-delay:1.3s}.load3 uni-view[data-v-23b2d473]:nth-child(4){-webkit-animation-delay:1.43s;animation-delay:1.43s}@-webkit-keyframes load-data-v-23b2d473{0%{opacity:1}100%{opacity:.2}}",""]),t.exports=e},"228a":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={gjLoadMore:i("d189").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"invoice-list"},[t.invoiceList.length>0?i("v-uni-view",{staticClass:"gj-list"},[t._l(t.invoiceList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"gj-list-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.checkInvoice(e)},longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteInvoice(e.id)}}},[i("v-uni-view",{staticClass:"mid"},[i("v-uni-view",{staticClass:"t-box"},[1===parseInt(e.is_default,10)?i("v-uni-text",{staticClass:"tag",class:["text-"+t.themeColor.name]},[t._v("默认")]):t._e(),i("v-uni-text",[t._v("发票抬头: "+t._s(e.title))])],1),i("v-uni-view",{staticClass:"u-box"},[t._v("["+t._s(1===parseInt(e.type,10)?"公司":"个人")+"] —\n\t\t\t\t\t"+t._s(e.duty_paragraph||"个人发票无税号"))])],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"iconfont iconbianji",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.addInvoice("edit",e.id)}}})],1)],1)})),t.invoiceList.length>0?i("v-uni-text",{staticClass:"tips",class:"text-"+t.themeColor.name},[t._v("提示：长按可删除当前发票。最多只能存在一个默认发票。")]):t._e(),t.invoiceList.length>0?i("gj-load-more",{attrs:{status:t.loadingType}}):t._e()],2):t._e(),i("v-uni-view",{staticClass:"add-btn-wrapper"},[i("v-uni-button",{staticClass:"add-btn",class:"bg-"+t.themeColor.name,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addInvoice("add")}}},[t._v("新增发票")])],1),0!==t.invoiceList.length||t.loading?t._e():i("gj-empty",{attrs:{info:"暂无发票"}}),i("gjLoading",{attrs:{isFullScreen:!0,active:t.loading}})],1)},o=[]},"23b2":function(t,e,i){"use strict";i.r(e);var n=i("8e79"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},2759:function(t,e,i){"use strict";i.r(e);var n=i("228a"),a=i("c081");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("d7eb");var r,d=i("f0c5"),s=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"12dc4fdb",null,!1,n["a"],r);e["default"]=s.exports},2909:function(t,e,i){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t){if(Array.isArray(t))return n(t)}function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t,e){if(t){if("string"===typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return a(t)||o(t)||r(t)||d()}i.r(e),i.d(e,"default",(function(){return s}))},"8e79":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"gj-load-more",props:{status:{type:String,default:"more"},width:{type:String,default:"100vw"},showIcon:{type:Boolean,default:!0},color:{type:String,default:"#777777"},contentText:{type:Object,default:function(){return{}}}},data:function(){return{}}};e.default=n},"9dfe":function(t,e,i){var n=i("1c94");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("9208cb30",n,!0,{sourceMap:!1,shadowMode:!1})},a12f:function(t,e,i){"use strict";var n=i("9dfe"),a=i.n(n);a.a},a2e3:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"load-more",style:{width:t.width}},["loading"===t.status&&t.showIcon?i("v-uni-view",{staticClass:"gj-load-more__img"},[i("v-uni-view",{staticClass:"load1"},[i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}})],1),i("v-uni-view",{staticClass:"load2"},[i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}})],1),i("v-uni-view",{staticClass:"load3"},[i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}}),i("v-uni-view",{style:{background:t.color}})],1)],1):t._e(),i("v-uni-view",{staticClass:"cu-load",class:"more"===t.status?"loading":"over"})],1)},o=[]},c081:function(t,e,i){"use strict";i.r(e);var n=i("ec0b"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},d189:function(t,e,i){"use strict";i.r(e);var n=i("a2e3"),a=i("23b2");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("a12f");var r,d=i("f0c5"),s=Object(d["a"])(a["default"],n["b"],n["c"],!1,null,"23b2d473",null,!1,n["a"],r);e["default"]=s.exports},d7eb:function(t,e,i){"use strict";var n=i("1008"),a=i.n(n);a.a},ec0b:function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2909"));i("96cf");var o=n(i("1da1")),r=i("c24f"),d=i("f8b7"),s=n(i("d189")),c={components:{gjLoadMore:s.default},data:function(){return{timeOutEvent:0,source:0,invoiceList:[],page:1,loadingType:"more",loading:!0,order_id:0}},onShow:function(){this.initData()},onLoad:function(t){this.source=t.source,this.order_id=t.order_id},onPullDownRefresh:function(){this.page=1,this.invoiceList.length=0,this.getInvoiceList("refresh")},onReachBottom:function(){"nomore"!==this.loadingType&&(this.page++,this.getInvoiceList())},methods:{deleteInvoice:function(t){var e=this;uni.showModal({content:"确定要删除该发票吗",success:function(i){i.confirm&&e.handleInvoiceDel(t)}})},handleInvoiceDel:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.invoicesDelete)({id:e}).then((function(){i.page=1,i.invoiceList.length=0,i.getInvoiceList()}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),goTouchEnd:function(){clearTimeout(this.timeOutEvent)},goTouchMove:function(){clearTimeout(this.timeOutEvent),this.timeOutEvent=0},initData:function(){this.page=1,this.invoiceList.length=0,this.getInvoiceList()},getInvoiceList:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.getInvoices)({page:this.page}).then((function(t){i.loading=!1,"refresh"===e&&uni.stopPullDownRefresh(),i.loadingType=t.data.meta.current_page<t.data.meta.last_page?"more":"nomore",i.invoiceList=[].concat((0,a.default)(i.invoiceList),(0,a.default)(t.data.data))})).catch((function(){"refresh"===e&&uni.stopPullDownRefresh(),i.loading=!1}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkInvoice:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==parseInt(this.source,10)){t.next=7;break}return console.log(e),console.log(this.order_id),t.next=5,(0,d.orderInvoicesCreate)({id:e.id,order_id:this.order_id});case 5:this.$mHelper.prePage().invoiceItem=e,this.$mRouter.back();case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addInvoice:function(t,e){this.$mRouter.push({route:"/pages/set/invoice/manage?type=".concat(t,"&id=").concat(e)})}}};e.default=c},f8b7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.orderList=a,e.orderClose=o,e.orderDelete=r,e.orderReceived=d,e.orderDetail=s,e.closeOrderRefundApply=c,e.applyRefund=u,e.orderCreate=l,e.orderInvoices=v,e.orderInvoicesCreate=f,e.sendReview=h,e.getShip=g;var n=i("dc40");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.get("/orders",t,{custom:{auth:!0}})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.post("/orders/"+t.id+"/close",t,{custom:{auth:!0}})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.delete("/orders/"+t.id+"/delete",t,{custom:{auth:!0}})}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.post("/orders/"+t.id+"/received",t,{custom:{auth:!0}})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.get("/orders/"+t.id,t,{custom:{auth:!0}})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.post("/orders/"+t.id+"/closeApplyRefund",t,{custom:{auth:!0}})}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.post("/orders/"+t.id+"/applyRefund",t,{custom:{auth:!0}})}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.post("/orders",t,{custom:{auth:!0}})}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.get("/orderinvoices",t,{custom:{auth:!0}})}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.post("/orderinvoices/"+t.id,t,{custom:{auth:!0}})}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.post("/orders/"+t.order_id+"/review",t,{custom:{auth:!0}})}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.http.get("/orders/"+t.id+"/ship",t,{custom:{auth:!0}})}}}]);