(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-coupon-list"],{"1c94":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".gj-load-more[data-v-23b2d473]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:%?80?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center\n\t/*position: fixed;*/\n\t/*bottom: 5upx;*/\n\t/*text-align: center;*/}.gj-load-more__text[data-v-23b2d473]{font-size:%?28?%;color:#999}.gj-load-more__img[data-v-23b2d473]{height:24px;width:24px;margin-right:10px}.gj-load-more__img > uni-view[data-v-23b2d473]{position:absolute}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]{width:6px;height:2px;border-top-left-radius:1px;border-bottom-left-radius:1px;background:#999;position:absolute;opacity:.2;-webkit-transform-origin:50%;transform-origin:50%;-webkit-animation:load-data-v-23b2d473 1.56s ease infinite;animation:load-data-v-23b2d473 1.56s ease infinite}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]:nth-child(1){-webkit-transform:rotate(90deg);transform:rotate(90deg);top:2px;left:9px}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]:nth-child(2){-webkit-transform:rotate(180deg);transform:rotate(180deg);top:11px;right:0}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]:nth-child(3){-webkit-transform:rotate(270deg);transform:rotate(270deg);bottom:2px;left:9px}.gj-load-more__img > uni-view uni-view[data-v-23b2d473]:nth-child(4){top:11px;left:0}.load1[data-v-23b2d473],\n.load2[data-v-23b2d473],\n.load3[data-v-23b2d473]{height:24px;width:24px}.load2[data-v-23b2d473]{-webkit-transform:rotate(30deg);transform:rotate(30deg)}.load3[data-v-23b2d473]{-webkit-transform:rotate(60deg);transform:rotate(60deg)}.load1 uni-view[data-v-23b2d473]:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s}.load2 uni-view[data-v-23b2d473]:nth-child(1){-webkit-animation-delay:.13s;animation-delay:.13s}.load3 uni-view[data-v-23b2d473]:nth-child(1){-webkit-animation-delay:.26s;animation-delay:.26s}.load1 uni-view[data-v-23b2d473]:nth-child(2){-webkit-animation-delay:.39s;animation-delay:.39s}.load2 uni-view[data-v-23b2d473]:nth-child(2){-webkit-animation-delay:.52s;animation-delay:.52s}.load3 uni-view[data-v-23b2d473]:nth-child(2){-webkit-animation-delay:.65s;animation-delay:.65s}.load1 uni-view[data-v-23b2d473]:nth-child(3){-webkit-animation-delay:.78s;animation-delay:.78s}.load2 uni-view[data-v-23b2d473]:nth-child(3){-webkit-animation-delay:.91s;animation-delay:.91s}.load3 uni-view[data-v-23b2d473]:nth-child(3){-webkit-animation-delay:1.04s;animation-delay:1.04s}.load1 uni-view[data-v-23b2d473]:nth-child(4){-webkit-animation-delay:1.17s;animation-delay:1.17s}.load2 uni-view[data-v-23b2d473]:nth-child(4){-webkit-animation-delay:1.3s;animation-delay:1.3s}.load3 uni-view[data-v-23b2d473]:nth-child(4){-webkit-animation-delay:1.43s;animation-delay:1.43s}@-webkit-keyframes load-data-v-23b2d473{0%{opacity:1}100%{opacity:.2}}",""]),t.exports=e},"23b2":function(t,e,n){"use strict";n.r(e);var i=n("8e79"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},2909:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t){if(Array.isArray(t))return i(t)}function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return a(t)||o(t)||r(t)||s()}n.r(e),n.d(e,"default",(function(){return u}))},"353f":function(t,e,n){"use strict";n.r(e);var i=n("61b4"),a=n("f48e");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"d3bc7a1e",null,!1,i["a"],r);e["default"]=u.exports},"61b4":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={gjLoadMore:n("d189").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"coupon-center"},[n("v-uni-view",{staticClass:"coupon-list"},[n("v-uni-view",{staticClass:"sub-list valid"},t._l(t.couponList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"row",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.getCoupon(e)}}},[n("v-uni-view",{staticClass:"carrier",class:0===e.is_get?"gj-opacity":""},[n("v-uni-view",{staticClass:"title"},[n("v-uni-view",[n("v-uni-text",{staticClass:"cell-icon",class:"bg-"+t.themeColor.name},[t._v(t._s(2===parseInt(e.range_type,10)?"限":"全"))]),n("v-uni-text",{staticClass:"cell-title"},[t._v(t._s(e.title))])],1),n("v-uni-view",[1===e.type?n("v-uni-text",{staticClass:"price",class:"text-"+t.themeColor.name},[t._v(t._s(t.moneySymbol)+t._s(e.value))]):n("v-uni-text",{staticClass:"price-discount",class:"text-"+t.themeColor.name},[t._v(t._s(e.value/10+"折"))])],1)],1),n("v-uni-view",{staticClass:"term"},[0===e.term_of_validity_type?n("v-uni-text",[t._v(t._s(t._f("time")(e.start_time))+" ~ "+t._s(t._f("time")(e.end_time)))]):n("v-uni-text",[t._v("领取之日起"+t._s(e.fixed_term)+"天内有效")]),n("v-uni-text",{staticClass:"at_least"},[t._v("满"+t._s(e.at_least)+"可用")])],1),n("v-uni-view",{staticClass:"usage"},[n("v-uni-text",[t._v(t._s(2===parseInt(e.range_type,10)?"部分产品使用":"全场产品使用"))]),n("v-uni-view",[t._v(t._s(0===parseInt(e.max_fetch,10)?"不限":"每人限领"+e.max_fetch)+"\n\t\t\t\t\t\t\t总共"+t._s(e.count)),n("v-uni-text",{staticClass:"last"},[t._v("剩余"+t._s(e.get_count))])],1)],1)],1)],1)})),1),t.couponList.length>0?n("gj-load-more",{attrs:{status:t.loadingType}}):t._e()],1),0!==t.couponList.length||t.loading?t._e():n("gj-empty",{attrs:{info:t.errorInfo||"暂无优惠券"}}),n("gjLoading",{attrs:{isFullScreen:!0,active:t.loading}})],1)},o=[]},"7b50":function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("2909"));n("96cf");var o=i(n("1da1")),r=n("cbfe"),s=i(n("d189")),u=(i(n("5028")),{components:{gjLoadMore:s.default},data:function(){return{couponList:[],type:null,loadingType:"more",page:1,loading:!0,moneySymbol:this.moneySymbol,errorInfo:""}},filters:{time:function(t){return t}},onLoad:function(t){this.type=t.type,this.initData()},onPullDownRefresh:function(){this.page=1,this.couponList.length=0,this.getCouponList("refresh")},onReachBottom:function(){"nomore"!==this.loadingType&&(this.page++,this.getCouponList())},methods:{initData:function(){this.getCouponList()},getCouponList:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.coupons)({page:this.page}).then((function(t){n.loading=!1,"refresh"===e&&uni.stopPullDownRefresh(),n.loadingType=t.data.meta.current_page<t.data.meta.last_page?"more":"nomore",n.couponList=[].concat((0,a.default)(n.couponList),(0,a.default)(t.data.data))})).catch((function(t){n.couponList.length=0,n.errorInfo=t,n.loading=!1,"refresh"===e&&uni.stopPullDownRefresh()}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getCoupon:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.type){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,r.getCoupons)({id:e.id}).then((function(t){n.page=1,n.couponList.length=0,0==t.data?n.$mHelper.toast("领取失败，已被领取完毕"):-1==t.data?n.$mHelper.toast("您已领取，请不要重复领取"):n.$mHelper.toast("领取成功"),n.getCouponList()}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}});e.default=u},"8e79":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"gj-load-more",props:{status:{type:String,default:"more"},width:{type:String,default:"100vw"},showIcon:{type:Boolean,default:!0},color:{type:String,default:"#777777"},contentText:{type:Object,default:function(){return{}}}},data:function(){return{}}};e.default=i},"9dfe":function(t,e,n){var i=n("1c94");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("9208cb30",i,!0,{sourceMap:!1,shadowMode:!1})},a12f:function(t,e,n){"use strict";var i=n("9dfe"),a=n.n(i);a.a},a2e3:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"load-more",style:{width:t.width}},["loading"===t.status&&t.showIcon?n("v-uni-view",{staticClass:"gj-load-more__img"},[n("v-uni-view",{staticClass:"load1"},[n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}})],1),n("v-uni-view",{staticClass:"load2"},[n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}})],1),n("v-uni-view",{staticClass:"load3"},[n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}}),n("v-uni-view",{style:{background:t.color}})],1)],1):t._e(),n("v-uni-view",{staticClass:"cu-load",class:"more"===t.status?"loading":"over"})],1)},o=[]},cbfe:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.coupons=a,e.getCoupons=o,e.userCoupons=r,e.userCouponCount=s;var i=n("dc40");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/coupons",t,{custom:{auth:!0}})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/coupons/"+t.id,t,{custom:{auth:!0}})}function r(t){return i.http.get("/usercoupons",t,{custom:{auth:!0}})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/usercoupons/count",t,{custom:{auth:!0}})}},d189:function(t,e,n){"use strict";n.r(e);var i=n("a2e3"),a=n("23b2");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("a12f");var r,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"23b2d473",null,!1,i["a"],r);e["default"]=u.exports},f48e:function(t,e,n){"use strict";n.r(e);var i=n("7b50"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a}}]);