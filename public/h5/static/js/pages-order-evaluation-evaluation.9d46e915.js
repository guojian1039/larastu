(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-evaluation-evaluation"],{"289f":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-rate"},t._l(t.stars,(function(e,i){return n("v-uni-view",{key:i,staticClass:"uni-rate__icon",style:{marginLeft:t.margin+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._onClick(i)}}},[n("v-uni-text",{staticClass:"iconfont iconstar",style:{color:t.isFill?"#eee":"#ececec"}}),n("v-uni-view",{staticClass:"uni-rate__icon-on",style:{width:e.activeWitch,top:-t.size/2-1+"px"}},[n("v-uni-text",{staticClass:"iconfont iconstar",style:{color:t.activeColor}})],1)],1)})),1)},r=[]},"2bf4":function(t,e,n){var i=n("c679");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("1aaa0608",i,!0,{sourceMap:!1,shadowMode:!1})},3750:function(t,e,n){"use strict";n.r(e);var i=n("289f"),a=n("e66b");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("a42d");var o,u=n("f0c5"),s=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"27d04a7f",null,!1,i["a"],o);e["default"]=s.exports},4229:function(t,e,n){"use strict";var i=n("d4f2"),a=n.n(i);a.a},"48fe":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={gjRate:n("3750").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?t._e():n("v-uni-view",{staticClass:"evaluation"},[t._l(t.productList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"evaluation-item"},[n("v-uni-view",{staticClass:"product-info"},[n("v-uni-image",{staticClass:"product-image",attrs:{mode:"aspectFill",src:t.imageUrl+e.product.image}}),n("v-uni-view",{staticClass:"product-content"},[n("v-uni-text",{staticClass:"product-name in2line"},[t._v(t._s(e.product.title))]),n("v-uni-text",{staticClass:"product-sku-name"},[t._v(t._s(e.product_sku.title||t.singleSkuText))]),n("v-uni-text",{staticClass:"product-price",class:"text-"+t.themeColor.name},[t._v(t._s(t.moneySymbol)+t._s(e.price))]),t._v("* "+t._s(e.amount))],1)],1),"add"!==t.evaluationType?n("v-uni-view",{staticClass:"product-rate"},[t._v("整体评价"),n("v-uni-view",{staticClass:"product-rate-wrapper"},[n("gj-rate",{staticClass:"rate",attrs:{size:"22",value:e.rating||5,index:i,margin:8,"active-color":t.themeColor.color},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleScoreChange.apply(void 0,arguments)}}})],1)],1):t._e(),n("v-uni-view",{staticClass:"product-textarea"},[n("v-uni-textarea",{staticClass:"textarea",attrs:{maxlength:"140","placeholder-style":"color:#ccc; font-size: 24upx",placeholder:"宝贝满足您的期待吗？说说您的使用心得，分享给您想买的他们吧"},model:{value:e.review,callback:function(n){t.$set(e,"review",n)},expression:"item.review"}}),"add"!==t.evaluationType?n("v-uni-view",{staticClass:"anonymous"},[n("v-uni-switch",{staticStyle:{transform:"scale(0.7)"},attrs:{color:t.themeColor.color,checked:1==t.is_anonymous},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleAnonymousChange.apply(void 0,arguments)}}}),n("v-uni-text",{staticClass:"spec-color"},[t._v(t._s(1===parseInt(t.is_anonymous,10)?"公开":"匿名"))])],1):t._e()],1),n("v-uni-view",{staticClass:"gj-uploader"},[n("v-uni-view",{staticClass:"uni-uploader"},[n("v-uni-view",{staticClass:"uni-uploader-body"},[n("v-uni-view",{staticClass:"uni-uploader__files"},[t._l(t.imageList[i],(function(e,a){return n("v-uni-view",{key:a},[n("v-uni-view",{staticClass:"uni-uploader__file",staticStyle:{position:"relative"}},[n("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e}}),n("v-uni-view",{staticClass:"close-view",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(a,i)}}},[t._v("x")])],1)],1)})),t.imageList[i].length<5?n("v-uni-view",{staticClass:"uni-uploader__input-box"},[n("v-uni-view",{staticClass:"uni-uploader__input",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadImage(i)}}})],1):t._e()],2)],1)],1)],1)],1)})),n("v-uni-view",{staticStyle:{margin:"11px","background-color":"#fff"}},[n("v-uni-button",{staticClass:"confirm-btn",class:"bg-"+t.themeColor.name,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleEvaluate()}}},[t._v(t._s("add"===t.evaluationType?"我要追评":"发表评价"))])],1),0===t.productList.length?n("gj-empty",{attrs:{info:"暂无待评价商品"}}):t._e()],2)},r=[]},"4a0f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var i={name:"rfRate",props:{isFill:{type:[Boolean,String],default:!0},color:{type:String,default:"#ececec"},activeColor:{type:String,default:"#ffca3e"},size:{type:[Number,String],default:24},value:{type:[Number,String],default:0},index:{type:Number,default:1},max:{type:[Number,String],default:5},margin:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1}},data:function(){return{valueSync:""}},computed:{stars:function(){for(var t=this.valueSync?this.valueSync:0,e=[],n=Math.floor(t),i=Math.ceil(t),a=0;a<this.max;a++)n>a?e.push({activeWitch:"100%"}):i-1===a?e.push({activeWitch:100*(t-n)+"%"}):e.push({activeWitch:"0"});return e}},created:function(){this.valueSync=Number(this.value)},methods:{_onClick:function(t){this.disabled||(this.valueSync=t+1,this.$emit("change",{value:this.valueSync,index:this.index}))}}};e.default=i},"7e12":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-73105e91]{background-color:#f8f8f8}.evaluation[data-v-73105e91]{margin-bottom:%?30?%}.evaluation .evaluation-item[data-v-73105e91]{margin:%?20?%;padding:%?30?%;background-color:#fff;border-radius:%?12?%;box-shadow:%?0?% %?5?% %?25?% rgba(0,0,0,.05)}.evaluation .product-info[data-v-73105e91]{display:-webkit-box;display:-webkit-flex;display:flex}.evaluation .product-info .product-image[data-v-73105e91]{width:%?200?%;height:%?150?%}.evaluation .product-info .product-content[data-v-73105e91]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?20?%}.evaluation .product-info .product-content .product-name[data-v-73105e91]{font-size:%?28?%;color:#303133;line-height:%?32?%;min-height:%?60?%}.evaluation .product-info .product-content .product-sku-name[data-v-73105e91]{display:block;font-size:%?28?%;color:#303133}.evaluation .product-rate[data-v-73105e91]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?32?%;color:#303133;padding:%?20?% 0;border-bottom:1px solid rgba(0,0,0,.1)}.evaluation .product-rate .product-rate-wrapper[data-v-73105e91]{margin-top:%?10?%;display:inline-block}.evaluation .product-textarea[data-v-73105e91]{margin-top:%?20?%;height:%?180?%;border-bottom:1px solid rgba(0,0,0,.1);position:relative}.evaluation .product-textarea .textarea[data-v-73105e91]{width:100%}.evaluation .product-textarea .tips[data-v-73105e91]{position:absolute;bottom:%?10?%;right:0;font-size:%?24?%;color:#909399}.evaluation .product-textarea .tips .f[data-v-73105e91]{color:#4cd964}.evaluation .product-textarea .tips .s[data-v-73105e91]{color:#fa436a}.evaluation .product-textarea .anonymous[data-v-73105e91]{color:#909399;font-size:%?24?%;position:absolute;bottom:0;left:0}.evaluation .upload-image[data-v-73105e91]{overflow:hidden;margin:%?40?% 0}.evaluation .upload-image .upload-image-wrapper[data-v-73105e91]{display:inline-block;position:relative;width:%?200?%;height:%?200?%;padding:%?10?%;margin:%?10?%}.evaluation .upload-image .upload-image-wrapper .image[data-v-73105e91]{display:inline-block;width:%?180?%;height:%?180?%}.evaluation .upload-image .upload-image-wrapper .image-close[data-v-73105e91]{position:absolute;top:%?-10?%;right:%?-10?%}.evaluation .upload-image .add[data-v-73105e91]{display:inline-block;overflow:hidden;width:%?180?%;height:%?180?%;text-align:center;border:1px solid rgba(0,0,0,.05);font-size:%?88?%;color:#606266;font-weight:100}.evaluation .confirm-btn[data-v-73105e91]{width:%?630?%;height:%?76?%;line-height:%?76?%;border-radius:50px;margin-top:%?50?%;font-size:%?32?%}.evaluation .confirm-btn[data-v-73105e91]:after{border-radius:100px}.evaluation .uni-uploader__file[data-v-73105e91]{width:%?190?%;height:%?190?%}.evaluation .uni-uploader__input-box[data-v-73105e91]{width:%?188?%;height:%?188?%}body.?%PAGE?%[data-v-73105e91]{background-color:#f8f8f8}",""]),t.exports=e},"834e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCaptchas=a,e.getVerificationCodes=r,e.getArea=o,e.getAnnouces=u,e.getAnnouce=s,e.getSitehelps=c,e.getSitehelp=l,e.uploadImage=d,e.register=p,e.resetPassword=v;var i=n("dc40");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/captchas",t)}function r(t){return i.http.post("/verificationCodes",t)}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/comm/getArea",t)}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/annouces",t)}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/annouces/"+t.id,t)}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/sitehelps",t)}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/sitehelps/"+t.id,t)}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.upload("/upload",t)}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/users",t)}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.put("/resetPassword",t)}},"9fc4":function(t,e,n){"use strict";n.r(e);var i=n("48fe"),a=n("f525");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("4229");var o,u=n("f0c5"),s=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"73105e91",null,!1,i["a"],o);e["default"]=s.exports},a42d:function(t,e,n){"use strict";var i=n("2bf4"),a=n.n(i);a.a},b56d:function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a"),n("96cf");var a=i(n("1da1")),r=i(n("3750")),o=n("f8b7"),u=n("834e"),s={components:{gjRate:r.default},data:function(){return{loading:!0,productList:[],token:null,content:"",evaluationType:null,imageList:[],is_anonymous:"1",moneySymbol:this.moneySymbol,orderId:"",singleSkuText:this.singleSkuText,imageUrl:this.$mConstDataConfig.imageUrl}},computed:{wordLimit:function(){var t=this;return function(e){return 140-t.productList[e].content.length}}},onLoad:function(t){this.initData(t)},methods:{initData:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.productList.length=0,e.type&&(this.evaluationType=e.type),e.data?(this.productList.push(JSON.parse(e.data)),this.productList.forEach((function(t){i.imageList.push([]),t.review="",t.rating=5})),this.loading=!1):e.order_id&&(this.orderId=e.order_id,this.getOrderProductList()),n="发表评价","add"===e.type&&(n="追加评价"),uni.setNavigationBarTitle({title:n});case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getOrderProductList:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.orderDetail)({id:this.orderId,is_evaluate:0,include:["items.productSku","items.product"]}).then(function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!1,e.productList=n.data.items,e.productList.forEach((function(t){e.imageList.push([]),t.review="",t.rating=5}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:this.loading=!1;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleScoreChange:function(t){this.productList[t.index].rating=t.value},handleAnonymousChange:function(t){t.detail.value?this.is_anonymous=1:this.is_anonymous=0},close:function(t,e){this.imageList[e].splice(t,1)},uploadImage:function(t){var e=this;uni.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(){var n=(0,a.default)(regeneratorRuntime.mark((function n(i){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.handleUploadFile(i.tempFilePaths,t);case 2:case"end":return n.stop()}}),n)})));function i(t){return n.apply(this,arguments)}return i}()})},handleUploadFile:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e,n){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.forEach((function(t){var e={method:"POST",filePath:t,fileType:"image",name:"image",formData:{type:"review"},custom:{auth:!0}};(0,u.uploadImage)(e).then(function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.imageList[n].push(e.data.path);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 1:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),handleEvaluate:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e={},"add"!==this.evaluationType&&(n=[],this.productList.forEach((function(t,e){n.push({id:t.id,is_anonymous:i.is_anonymous,covers:i.imageList[e],rating:t.rating,review:t.review})})),e.order_id=this.orderId,e.reviews=n,console.log(e),this.handleEvaluateCreate(e));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleEvaluateCreate:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.sendReview)(e).then((function(){1===n.productList.length?n.$mRouter.back():n.getOrderProductList()}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),handleEvaluateAgain:function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,evaluateAgain(e).then((function(){n.$mRouter.back()}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),etest:function(){console.log(this.productList)}}};e.default=s},c679:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".uni-rate[data-v-27d04a7f]{display:-webkit-box;display:-webkit-flex;display:flex;line-height:0;font-size:0;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.iconfont[data-v-27d04a7f]{font-size:%?36?%}.uni-rate__icon[data-v-27d04a7f]{position:relative;line-height:0;font-size:0}.uni-rate__icon-on[data-v-27d04a7f]{overflow:hidden;position:absolute;top:0;left:0;line-height:1;text-align:left}",""]),t.exports=e},d4f2:function(t,e,n){var i=n("7e12");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("4c1f176c",i,!0,{sourceMap:!1,shadowMode:!1})},e66b:function(t,e,n){"use strict";n.r(e);var i=n("4a0f"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},f525:function(t,e,n){"use strict";n.r(e);var i=n("b56d"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},f8b7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.orderList=a,e.orderClose=r,e.orderDelete=o,e.orderReceived=u,e.orderDetail=s,e.closeOrderRefundApply=c,e.applyRefund=l,e.orderCreate=d,e.orderInvoices=p,e.orderInvoicesCreate=v,e.sendReview=f,e.getShip=h;var i=n("dc40");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/orders",t,{custom:{auth:!0}})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/orders/"+t.id+"/close",t,{custom:{auth:!0}})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.delete("/orders/"+t.id+"/delete",t,{custom:{auth:!0}})}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/orders/"+t.id+"/received",t,{custom:{auth:!0}})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/orders/"+t.id,t,{custom:{auth:!0}})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/orders/"+t.id+"/closeApplyRefund",t,{custom:{auth:!0}})}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/orders/"+t.id+"/applyRefund",t,{custom:{auth:!0}})}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/orders",t,{custom:{auth:!0}})}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/orderinvoices",t,{custom:{auth:!0}})}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/orderinvoices/"+t.id,t,{custom:{auth:!0}})}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.post("/orders/"+t.order_id+"/review",t,{custom:{auth:!0}})}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.http.get("/orders/"+t.id+"/ship",t,{custom:{auth:!0}})}}}]);