(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-set-invoice-manage"],{"047e":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-47503cda]{background:#f8f8f8}.invoice-manage[data-v-47503cda]{padding-top:%?20?%}.invoice-manage .invoice-type-item[data-v-47503cda]{margin-right:%?20?%}.invoice-manage .invoice-type-item .gender-item-text[data-v-47503cda]{margin-left:%?10?%}body.?%PAGE?%[data-v-47503cda]{background:#f8f8f8}",""]),t.exports=e},"70be":function(t,e,a){"use strict";var n=a("b647"),i=a.n(n);i.a},"860c":function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"invoice-manage gj-row-wrapper"},[a("v-uni-view",{staticClass:"row b-b"},[a("v-uni-text",{staticClass:"tit"},[t._v("发票类型")]),a("v-uni-radio-group",{staticClass:"invoice-type",on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleInvoiceTypeChange.apply(void 0,arguments)}}},t._l(t.invoiceType,(function(e,n){return a("v-uni-label",{key:n,staticClass:"invoice-type-item"},[a("v-uni-radio",{staticClass:"gender-item-radio",attrs:{size:"small",color:t.themeColor.name,value:""+e.value,checked:e.value===t.invoiceData.type}}),a("v-uni-text",{staticClass:"gender-item-text"},[t._v(t._s(e.name))])],1)})),1)],1),a("v-uni-view",{staticClass:"row b-b"},[a("v-uni-text",{staticClass:"tit"},[t._v("发票抬头")]),a("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入发票抬头","placeholder-class":"placeholder"},model:{value:t.invoiceData.title,callback:function(e){t.$set(t.invoiceData,"title",e)},expression:"invoiceData.title"}})],1),1===parseInt(t.invoiceData.type,10)?a("v-uni-view",{staticClass:"row b-b"},[a("v-uni-text",{staticClass:"tit"},[t._v("发票税号")]),a("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入发票税号","placeholder-class":"placeholder"},model:{value:t.invoiceData.duty_paragraph,callback:function(e){t.$set(t.invoiceData,"duty_paragraph",e)},expression:"invoiceData.duty_paragraph"}})],1):t._e(),a("v-uni-view",{staticClass:"row default-row"},[a("v-uni-text",{staticClass:"tit"},[t._v("设为默认")]),a("v-uni-switch",{attrs:{checked:!!t.invoiceData.is_default,color:t.themeColor.name},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.switchChange.apply(void 0,arguments)}}})],1),a("v-uni-button",{staticClass:"add-btn",class:"bg-"+t.themeColor.name,attrs:{disabled:t.btnLoading,loading:t.btnLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("提交")])],1)},r=[]},"9d59":function(t,e,a){"use strict";a.r(e);var n=a("a7ab"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},a7ab:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=n(a("1da1")),r=a("c24f"),c={data:function(){return{invoiceData:{type:2,title:"",duty_paragraph:"",is_default:""},invoiceType:[{name:"公司",value:1},{name:"个人",value:2}],reqBody:{},btnLoading:!1}},onLoad:function(t){this.initData(t)},methods:{initData:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a="新增发票","edit"!==e.type){t.next=5;break}return a="编辑发票",t.next=5,this.getInvoiceDetail(e.id);case 5:this.manageType=e.type,uni.setNavigationBarTitle({title:a});case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getInvoiceDetail:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.invoiceDetail)({id:e}).then(function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.invoiceData=e.data;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),handleInvoiceTypeChange:function(t){this.invoiceData.type=t.detail.value},switchChange:function(t){this.invoiceData.is_default=t.detail.value?"1":"0"},confirm:function(){var t;this.reqBody["title"]=this.invoiceData["title"],1===parseInt(this.invoiceData["type"],10)?(this.reqBody["duty_paragraph"]=this.invoiceData["duty_paragraph"],t=this.$mGraceChecker.check(this.reqBody,this.$mFormRule.cInvoiceRule)):2===parseInt(this.invoiceData["type"],10)&&(t=this.$mGraceChecker.check(this.reqBody,this.$mFormRule.pInvoiceRule)),t?(this.btnLoading=!0,"edit"===this.manageType?this.handleInvoiceUpdate(this.invoiceData):this.handleInvoiceCreate(this.invoiceData)):this.$mHelper.toast(this.$mGraceChecker.error)},handleInvoiceUpdate:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.invoiceUpdate)(e).then((function(){a.btnLoading=!1,a.$mHelper.toast("恭喜您, 发票修改成功！"),a.$mRouter.back()})).catch((function(){a.btnLoading=!1}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),handleInvoiceCreate:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.invoicesCreate)(e).then((function(){a.btnLoading=!1,a.$mHelper.toast("恭喜您, 发票添加成功！"),a.$mRouter.back()})).catch((function(){a.btnLoading=!1}));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}};e.default=c},acea:function(t,e,a){"use strict";a.r(e);var n=a("860c"),i=a("9d59");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("70be");var c,o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"47503cda",null,!1,n["a"],c);e["default"]=s.exports},b647:function(t,e,a){var n=a("047e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("196c4fb2",n,!0,{sourceMap:!1,shadowMode:!1})}}]);